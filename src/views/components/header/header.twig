{#
| Variable | Type | Description |
|------------------|---------|---------------------------------|
| cart | object | |
| cart.items_count | int | |
| cart.total | string | Formatted total ex: "١٠٠ ر.س" |
#}
{% set important_links = theme.settings.get('important_links') %}
<header class="store-header">
  {# Top Bar with Contact & Links #}
  <div class="top-navbar bg-gray-50 py-2">
    <div class="container flex justify-between items-center">
      {# Left: Contact Email #}
      <div class="flex items-center">
        <i class="sicon-mail text-gray-600 mr-2"></i>
        <a href="mailto:{{ store.settings.store_email }}" class="text-sm text-gray-600 hover:text-primary">
          {{ store.settings.store_email }}
        </a>
      </div>

      {# Right: Important Links #}
      <div class="flex items-center gap-6">
        {% if important_links %}
        <salla-menu source="footer" topnav class="text-sm"></salla-menu>
        {% endif %}

        {# Language & Currency Component #}
        {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
        <button type="button" onclick="salla.event.dispatch('localization::open')"
          class="text-sm text-gray-600 hover:text-primary flex items-center">
          <span class="flag iti__flag iti__{{ user.language.country_code }} rounded-sm mr-1"></span>
          {{ user.language.name }}
        </button>
        <salla-localization-modal></salla-localization-modal>
        {% endif %}
      </div>
    </div>
  </div>

  {# Main Header #}
  <div class="main-header bg-white border-b sticky top-0 z-40 transition-shadow duration-300" id="sticky-header">
    <div class="container py-4">
      <div class="flex items-center justify-between">
        {# Left: Cart Icon with Count #}
        <div class="flex items-center gap-6">
          <div class="relative">
            <salla-cart-summary class="header-icon-btn">
              <i slot="icon" class="sicon-shopping-bag text-2xl"></i>
            </salla-cart-summary>
            <span
              class="cart-count-badge absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">
              {{ cart.items_count | default(0) }}
            </span>
          </div>

          {# User/Login Icon #}
          {% if user.type=='user' %}
          <salla-user-menu avatar-only show-header class="header-icon-btn"></salla-user-menu>
          {% else %}
          <button class="header-icon-btn" aria-label="user-icon" onclick="salla.event.dispatch('login::open')">
            <i class="sicon-user-circle text-2xl"></i>
          </button>
          {% endif %}
        </div>

        {# Center: Logo #}
        <div class="flex-1 flex justify-center">
          <a class="navbar-brand" href="{{ store.url }}">
            <img fetchpriority="high" height="60" loading="eager" src="{{ store.logo }}" alt="{{ store.name }} logo"
              class="max-h-16">
            {% if is_page('index') %}
            <h1 class="sr-only">{{ store.name }}</h1>
            {% else %}
            <h2 class="sr-only">{{ store.name }}</h2>
            {% endif %}
          </a>
        </div>

        {# Right: Search Bar #}
        <div class="flex items-center gap-6">
          <div class="relative">
            <salla-search class="inline-search-bar" style="min-width: 200px;"></salla-search>
          </div>

          {# Mobile Menu Button #}
          <a class="lg:hidden header-icon-btn" href="#mobile-menu" aria-label="Open-menu">
            <i class="sicon-menu text-2xl"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  {# Navigation Menu #}
  <div id="mainnav" class="main-nav-container bg-white border-b">
    <div class="container">
      <div class="flex items-center justify-center py-3">
        <custom-main-menu class="hidden lg:flex"></custom-main-menu>
      </div>
    </div>
  </div>
</header>
{% if store.scope %}
<salla-scopes selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"></salla-scopes>
{% endif %}